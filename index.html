<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Car Saver</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            background-color: #0b0b0b;
            color: white;
            font-family: 'Inter', sans-serif;
            margin: 0;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            height: 100vh;
        }

        .target-red {
            color: #ff3b30;
            font-weight: 900;
            font-style: italic;
            text-shadow: 0 0 25px rgba(255, 59, 48, 0.6);
            font-size: clamp(2.5rem, 10vw, 3.5rem);
            line-height: 1;
            text-align: center;
            margin-top: 30px;
        }

        .paint-container {
            position: relative;
            width: 100%;
            height: 250px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 20px 0;
        }

        .car-mask {
            position: relative;
            width: 90%;
            height: 100%;
            /* –°—Å—ã–ª–∫–∞ –Ω–∞ —Ç–≤–æ–π —Ñ–∞–π–ª –≤ GitHub */
            -webkit-mask-image: url('car-outline.png');
            mask-image: url('car-outline.png');
            -webkit-mask-size: contain;
            mask-size: contain;
            -webkit-mask-repeat: no-repeat;
            mask-repeat: no-repeat;
            -webkit-mask-position: center;
            background: rgba(255, 255, 255, 0.05);
        }

        .liquid-fill {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 0%;
            background: linear-gradient(180deg, #007AFF 0%, #00f2ff 100%);
            transition: height 2s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 0 40px rgba(0, 122, 255, 0.5);
        }

        .liquid-fill::after {
            content: "";
            position: absolute;
            top: -15px;
            left: 0;
            width: 200%;
            height: 30px;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 100" preserveAspectRatio="none"><path d="M0,50 C150,100 350,0 500,50 C650,100 850,0 1000,50 L1000,100 L0,100 Z" fill="%23007AFF"/></svg>');
            background-size: 50% 100%;
            animation: waveFlow 4s linear infinite;
        }

        @keyframes waveFlow {
            from { transform: translateX(0); }
            to { transform: translateX(-50%); }
        }

        .glass-ui {
            background: rgba(255, 255, 255, 0.02);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.06);
            border-radius: 30px;
            padding: 20px;
            margin: 0 20px 20px 20px;
        }

        .btn-main {
            background: #1a1a1a;
            color: #444;
            cursor: not-allowed;
            transition: 0.3s all;
        }

        .btn-active {
            background: #007AFF !important;
            color: white !important;
            box-shadow: 0 0 20px rgba(0, 122, 255, 0.4);
            cursor: pointer !important;
        }

        /* –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –∫–∞–ª–µ–Ω–¥–∞—Ä—å */
        .calendar-footer {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            padding: 0 25px 30px 25px;
            width: 100%;
        }

        .month-item {
            text-align: center;
            font-size: 9px;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 1px;
            padding-bottom: 5px;
        }
    </style>
</head>
<body>

    <div class="target-red italic">500 000!</div>
    <p class="text-center text-gray-600 text-[10px] tracking-widest uppercase mt-1">–¢–ï–ù–ì–ï (‚Ç∏)</p>

    <div class="paint-container">
        <div class="car-mask">
            <div id="paintLevel" class="liquid-fill"></div>
        </div>
        <img src="car-outline.png" class="absolute pointer-events-none opacity-20 w-[90%] h-full object-contain">
    </div>

    <div class="glass-ui space-y-4">
        <input type="number" id="amountInput" placeholder="–°–£–ú–ú–ê ‚Ç∏" 
            class="w-full bg-black/50 border border-white/10 rounded-2xl py-4 text-center text-xl font-bold outline-none focus:border-blue-500 transition-all">
        
        <input type="file" id="receipt" class="hidden" onchange="fileUploaded()">
        <label for="receipt" id="fileLabel" class="flex items-center justify-center gap-2 w-full py-3 border border-dashed border-gray-700 rounded-2xl text-gray-500 text-xs cursor-pointer hover:border-blue-500 transition-all">
            <span>üìé –ü–†–ò–ö–†–ï–ü–ò–¢–¨ –ß–ï–ö</span>
        </label>

        <button id="addBtn" onclick="saveProgress()" disabled class="btn-main w-full py-4 rounded-2xl font-black uppercase tracking-widest text-sm">
            –ü–û–ü–û–õ–ù–ò–¢–¨
        </button>
    </div>

    <div class="calendar-footer mt-auto">
        <div class="month-item text-blue-500 border-b-2 border-blue-500">–Ø–ù–í</div>
        <div class="month-item text-gray-700 border-b border-gray-800">–§–ï–í</div>
        <div class="month-item text-gray-700 border-b border-gray-800">–ú–ê–†</div>
        <div class="month-item text-gray-700 border-b border-gray-800">–ê–ü–†</div>
    </div>

    <script>
        const GOAL = 500000;
        let savedTotal = localStorage.getItem('carSavings') ? parseFloat(localStorage.getItem('carSavings')) : 0;

        window.onload = () => { updateVisuals(); };

        function fileUploaded() {
            const btn = document.getElementById('addBtn');
            const label = document.getElementById('fileLabel');
            btn.disabled = false;
            btn.classList.add('btn-active');
            label.innerHTML = "‚úÖ –ß–ï–ö –ó–ê–ì–†–£–ñ–ï–ù";
            label.classList.add('text-blue-400', 'border-blue-400');
        }

        function saveProgress() {
            const val = parseFloat(document.getElementById('amountInput').value);
            if (!val || val <= 0) return;
            savedTotal += val;
            localStorage.setItem('carSavings', savedTotal);
            updateVisuals();
            resetForm();
            if (window.Telegram?.WebApp) {
                window.Telegram.WebApp.HapticFeedback.notificationOccurred('success');
            }
        }

        function updateVisuals() {
            const percent = Math.min((savedTotal / GOAL) * 100, 100);
            document.getElementById('paintLevel').style.height = percent + '%';
        }

        function resetForm() {
            document.getElementById('amountInput').value = "";
            document.getElementById('receipt').value = "";
            const btn = document.getElementById('addBtn');
            btn.disabled = true;
            btn.className = "btn-main w-full py-4 rounded-2xl font-black uppercase tracking-widest text-sm";
            const label = document.getElementById('fileLabel');
            label.innerHTML = "üìé –ó–ê–ì–†–£–ó–ò–¢–¨ –ß–ï–ö";
            label.className = "flex items-center justify-center gap-2 w-full py-3 border border-dashed border-gray-700 rounded-2xl text-gray-500 text-xs cursor-pointer hover:border-blue-500 transition-all";
        }
    </script>
</body>
</html>
